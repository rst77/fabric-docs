

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>peer node &mdash; hyperledger-fabricdocs master documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="hyperledger-fabricdocs master documentation" href="../index.html"/>
        <link rel="up" title="Commands Reference" href="../command_ref.html"/>
        <link rel="next" title="configtxgen" href="configtxgen.html"/>
        <link rel="prev" title="peer version" href="peerversion.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          


          
            <a href="../index.html" class="icon icon-home"> hyperledger-fabricdocs
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br><img style="background-color: #fff; height: unset; width: unset;" alt="Hyperledger Fabric" src=../_images/hyperledger_fabric_logo_color.png />
<br>
<a href="https://github.com/hyperledger/fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="GitHub" src="../_static/images/github_button.png"/></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="../_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="../_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="../_static/images/youtube_button.png"/></a>

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatis.html">Introdução</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What’s new in Hyperledger Fabric v2.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html#release-notes">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_concepts.html">Conceitos Chave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developapps/developing_applications.html">Developing Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment_guide_overview.html">Deploying a production network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops_guide.html">Operations Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade.html">Upgrading to the latest release</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../command_ref.html">Commands Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="peercommand.html">peer</a></li>
<li class="toctree-l2"><a class="reference internal" href="peerchaincode.html">peer chaincode</a></li>
<li class="toctree-l2"><a class="reference internal" href="peerlifecycle.html">peer lifecycle chaincode</a></li>
<li class="toctree-l2"><a class="reference internal" href="peerchannel.html">peer channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="peerversion.html">peer version</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">peer node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#syntax">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-start">peer node start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-reset">peer node reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-rollback">peer node rollback</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-usage">Example Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-start-example">peer node start example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-reset-example">peer node reset example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-rollback-example">peer node rollback example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configtxgen.html">configtxgen</a></li>
<li class="toctree-l2"><a class="reference internal" href="configtxlator.html">configtxlator</a></li>
<li class="toctree-l2"><a class="reference internal" href="cryptogen.html">cryptogen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../discovery-cli.html">Service Discovery CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="fabric-ca-commands.html">Fabric-CA Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fabric-FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributions Welcome!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../questions.html">Still Have Questions?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../status.html">Status</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hyperledger-fabricdocs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../command_ref.html">Commands Reference</a> &raquo;</li>
        
      <li>peer node</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/commands/peernode.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="peer-node">
<span id="peer-node"></span><h1>peer node<a class="headerlink" href="#peer-node" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">peer</span> <span class="pre">node</span></code> command allows an administrator to start a peer node,
reset all channels in a peer to the genesis block, or rollback a
channel to a given block number.</p>
<div class="section" id="syntax">
<span id="syntax"></span><h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">peer</span> <span class="pre">node</span></code> command has the following subcommands:</p>
<ul class="simple">
<li>start</li>
<li>reset</li>
<li>rollback</li>
</ul>
</div>
<div class="section" id="peer-node-start">
<span id="peer-node-start"></span><h2>peer node start<a class="headerlink" href="#peer-node-start" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Starts</span> <span class="n">a</span> <span class="n">node</span> <span class="n">that</span> <span class="n">interacts</span> <span class="k">with</span> <span class="n">the</span> <span class="n">network</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">start</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                <span class="n">help</span> <span class="k">for</span> <span class="n">start</span>
      <span class="o">--</span><span class="n">peer</span><span class="o">-</span><span class="n">chaincodedev</span>   <span class="n">start</span> <span class="n">peer</span> <span class="ow">in</span> <span class="n">chaincode</span> <span class="n">development</span> <span class="n">mode</span>
</pre></div>
</div>
</div>
<div class="section" id="peer-node-reset">
<span id="peer-node-reset"></span><h2>peer node reset<a class="headerlink" href="#peer-node-reset" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Resets</span> <span class="nb">all</span> <span class="n">channels</span> <span class="n">to</span> <span class="n">the</span> <span class="n">genesis</span> <span class="n">block</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">the</span> <span class="n">reset</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">blocks</span> <span class="n">starting</span> <span class="k">with</span> <span class="n">block</span> <span class="n">number</span> <span class="n">one</span> <span class="kn">from</span> <span class="nn">an</span> <span class="n">orderer</span> <span class="ow">or</span> <span class="n">another</span> <span class="n">peer</span> <span class="n">to</span> <span class="n">rebuild</span> <span class="n">the</span> <span class="n">block</span> <span class="n">store</span> <span class="ow">and</span> <span class="n">state</span> <span class="n">database</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">reset</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">reset</span>
</pre></div>
</div>
</div>
<div class="section" id="peer-node-rollback">
<span id="peer-node-rollback"></span><h2>peer node rollback<a class="headerlink" href="#peer-node-rollback" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Rolls</span> <span class="n">back</span> <span class="n">a</span> <span class="n">channel</span> <span class="n">to</span> <span class="n">a</span> <span class="n">specified</span> <span class="n">block</span> <span class="n">number</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">the</span> <span class="n">rollback</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">blocks</span><span class="p">,</span> <span class="n">which</span> <span class="n">got</span> <span class="n">removed</span> <span class="n">during</span> <span class="n">the</span> <span class="n">rollback</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">an</span> <span class="n">orderer</span> <span class="ow">or</span> <span class="n">another</span> <span class="n">peer</span> <span class="n">to</span> <span class="n">rebuild</span> <span class="n">the</span> <span class="n">block</span> <span class="n">store</span> <span class="ow">and</span> <span class="n">state</span> <span class="n">database</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">rollback</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">b</span><span class="p">,</span> <span class="o">--</span><span class="n">blockNumber</span> <span class="n">uint</span>   <span class="n">Block</span> <span class="n">number</span> <span class="n">to</span> <span class="n">which</span> <span class="n">the</span> <span class="n">channel</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">rolled</span> <span class="n">back</span> <span class="n">to</span><span class="o">.</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">--</span><span class="n">channelID</span> <span class="n">string</span>   <span class="n">Channel</span> <span class="n">to</span> <span class="n">rollback</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>               <span class="n">help</span> <span class="k">for</span> <span class="n">rollback</span>
</pre></div>
</div>
</div>
<div class="section" id="example-usage">
<span id="example-usage"></span><h2>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="peer-node-start-example">
<span id="peer-node-start-example"></span><h3>peer node start example<a class="headerlink" href="#peer-node-start-example" title="Permalink to this headline">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">start</span> <span class="o">--</span><span class="n">peer</span><span class="o">-</span><span class="n">chaincodedev</span>
</pre></div>
</div>
<p>starts a peer node in chaincode development mode. Normally chaincode containers are started
and maintained by peer. However in chaincode development mode, chaincode is built and started by the user. This mode is useful during chaincode development phase for iterative development.</p>
</div>
<div class="section" id="peer-node-reset-example">
<span id="peer-node-reset-example"></span><h3>peer node reset example<a class="headerlink" href="#peer-node-reset-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">reset</span>
</pre></div>
</div>
<p>resets all channels in the peer to the genesis block, i.e., the first block in the channel. The command also records the pre-reset height of each channel in the file system. Note that the peer process should be stopped while executing this command. If the peer process is running, this command detects that and returns an error instead of performing the reset. When the peer is started after performing the reset, the peer will fetch the blocks for each channel which were removed by the reset command (either from other peers or orderers) and commit the blocks up to the pre-reset height. Until all channels reach the pre-reset height, the peer will not endorse any transactions.</p>
</div>
<div class="section" id="peer-node-rollback-example">
<span id="peer-node-rollback-example"></span><h3>peer node rollback example<a class="headerlink" href="#peer-node-rollback-example" title="Permalink to this headline">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">rollback</span> <span class="o">-</span><span class="n">c</span> <span class="n">ch1</span> <span class="o">-</span><span class="n">b</span> <span class="mi">150</span>
</pre></div>
</div>
<p>rolls back the channel ch1 to block number 150. The command also records the pre-rolled back height of channel ch1 in the file system. Note that the peer should be stopped while executing this command. If the peer process is running, this command detects that and returns an error instead of performing the rollback. When the peer is started after performing the rollback, the peer will fetch the blocks for channel ch1 which were removed by the rollback command (either from other peers or orderers) and commit the blocks up to the pre-rolled back height. Until the channel ch1 reaches the pre-rolled back height, the peer will not endorse any transaction for any channel.</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configtxgen.html" class="btn btn-neutral float-right" title="configtxgen" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="peerversion.html" class="btn btn-neutral" title="peer version" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2020.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'master',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>